# -*- coding: utf-8 -*-
"""
Stock Analysis Dashboard
Phân tích chứng khoán Việt Nam
"""

# Fix Windows encoding issues
import sys
import io
sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8', errors='replace')
sys.stderr = io.TextIOWrapper(sys.stderr.buffer, encoding='utf-8', errors='replace')

import streamlit as st
import pandas as pd
import plotly.graph_objects as go
from datetime import datetime, timedelta
from vnstock import Vnstock
import gspread
from oauth2client.service_account import ServiceAccountCredentials
import json
import os
from config import get_google_credentials, get_config, update_config
import time
import warnings
from sectors import get_sector, get_all_sectors
from financial_screening import calculate_all_metrics, screen_by_criteria, calculate_composite_score
from watchlist import add_to_watchlist, get_watchlist, update_watchlist_metrics
from dashboard_tabs import render_money_flow_tab, render_financial_screening_tab, render_watchlist_tab

# Suppress Streamlit secrets warning for local development
warnings.filterwarnings('ignore', category=UserWarning, module='streamlit')
